<div id="show_machines_banner_<%= location.id %>" class="sub_nav_item" onclick="toggle_data('show_machines', <%= location.id %>);">
  <span>Show Machines At This Location</span>
  <%= open_closed_arrows_for('show_machines', location.id) %>
</div>
<div id="show_machines_<%= location.id %>" style="display: none;">
  <span>You can edit a machine's condition (click the comment text), view high scores, add a new high score, or delete a machine if that machine is no longer available at the selected location.</span>
  <br />
  <% LocationMachineXref.find_all_by_location_id(location.id).collect! do |lmx| %>
    <%= form_tag remove_machine_locations_path, :class => 'remove_machine', :method => 'get', :remote => true do %>
      <%= hidden_field_tag :location_id, lmx.location_id %>
      <%= hidden_field_tag :machine_id, lmx.machine_id %>
      <%= label_tag :machine_name, lmx.machine.name %>
      <%= submit_tag 'Remove' %>
    <% end %>
    <%= form_tag update_machine_condition_locations_path, :class => 'update_machine_condition', :method => 'get', :remote => true do %>
      <%= hidden_field_tag :location_id, lmx.location_id %>
      <%= hidden_field_tag :machine_id, lmx.machine_id %>
      <%= text_field_tag :machine_condition, lmx.condition ? lmx.condition + '-' + lmx.condition_date.to_s : 'No Condition' %>
      <%= submit_tag 'Update Condition' %>
    <% end %>
    <%= form_tag add_high_score_locations_path, :class => 'add_high_score', :method => 'get', :remote => true do %>
      <%= hidden_field_tag :location_machine_xref_id, lmx.id %>
      <%= text_field_tag :score %>
      <%= text_field_tag :initials %>
      <%= select_tag :rank, options_for_select({'' => '', 'GC' => 1, '1st' => 2, '2nd' => 3, '3rd' => 4, '4th' => 5}) %>
      <%= submit_tag 'Add Score' %>
    <% end %>
  <% end %>
</div>
