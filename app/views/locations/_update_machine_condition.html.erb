<div id="machine_condition_display_<%= lmx.id %>">
  <span id="machine_condition_<%= lmx.id %>"><%= lmx.condition ? lmx.condition : 'No Description' %></span>
</div>
<div id="machine_condition_edit_<%= lmx.id %>" style="display: none;">
  <%= form_tag update_machine_condition_locations_path, :id => "update_machine_condition_#{lmx.id}", :method => 'get', :remote => true do %>
    <%= hidden_field_tag :location_machine_xref_id, lmx.id %>
    <%= text_field_tag "new_machine_condition_#{lmx.id}", lmx.condition ? lmx.condition : 'No Condition' %>
    <%= submit_tag 'Update Condition', :id => 'update_condition' %>
    <%= submit_tag 'Cancel' %>
  <% end %>
</div>

<script type="text/javascript">
  $('#update_machine_condition_<%= lmx.id %>').submit(function () {
    $.get(this.action, $(this).serialize(), null, 'script');
    $('#machine_condition_<%= lmx.id %>').text($('#new_machine_condition_<%= lmx.id %>').val());
    $('#machine_condition_edit_<%= lmx.id %>').toggle();
    $('#machine_condition_display_<%= lmx.id %>').toggle();
  });

  $('#machine_condition_display_<%= lmx.id %>').click(function () {
    $('#machine_condition_edit_<%= lmx.id %>').toggle();
    $('#machine_condition_display_<%= lmx.id %>').toggle();
  });
</script>
